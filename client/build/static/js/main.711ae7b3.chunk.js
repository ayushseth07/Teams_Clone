(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){e.exports=a(169)},131:function(e,t){},157:function(e,t){},159:function(e,t){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),i=a.n(o),s=a(98),l=a(4),c=a(15),u=a(86),m=a.n(u)()("/"),d=a(185),p=a(191),g=a(190),f=a(170),b=a(192),x=a(87),v=a.n(x),E=a(187),y=a(188),h=a(189),B=Object(d.a)((function(e){return{title:{flexGrow:1,fontFamily:"'Pacifico', cursive",fontSize:"2.2rem",color:"#B3B3B3"},main:{backgroundColor:"#282828",borderRadius:"15px",padding:"10px"},button:{backgroundColor:"#404040",color:"#B3B3B3",fontFamily:"'Montserrat', sans-serif",fontSize:"1.1rem",borderRadius:"10px",textTransform:"none",marginLeft:"15px"},meetingID:{color:"#FFFFFFF",marginLeft:"14px",fontFamily:"'Ubuntu', sans-serif",fontSize:"1rem",marginRight:"14px"}}}));var N=function(e){var t=B();return r.a.createElement(E.a,null,r.a.createElement(y.a,{position:"static",className:t.main},r.a.createElement(h.a,null,r.a.createElement("span",{className:"fas fa-icons fa-3x",style:{color:"#B0B3B8",marginLeft:"10px",marginRight:"15px"}}),r.a.createElement(g.a,{variant:"h6",className:t.title},"VideoPrism.io"),e.meeting?r.a.createElement(g.a,{variant:"h6",className:t.meetingID},"Your RoomID :",r.a.createElement(b.a,{size:"large",className:t.button},e.room)):r.a.createElement(g.a,{variant:"h6",className:t.meetingID},r.a.createElement(b.a,{size:"large",className:t.button,display:"inline"},"A VideoChat WebApp for Everyone !!")))))},k=Object(d.a)((function(e){return{body:{display:"block",paddingTop:"10px",backgroundColor:"#181818"},paper:{marginRight:"5px",marginTop:"30px",borderRadius:"30px",background:"#e0e0e0",textAlign:"center"},mainTitle:{fontFamily:"'Ubuntu', sans-serif",color:"#B3B3B3",textAlign:"center",fontSize:"4rem",paddingTop:"20px",paddingBottom:"20px",paddingLeft:"50px",paddingRight:"50px"},meetingStart:{padding:"10px",paddingLeft:"20px",paddingRight:"20px",borderRadius:"20px",fontFamily:"'Montserrat', sans-serif",color:"#B3B3B3",fontSize:"2rem"},inputBox:{backgroundColor:"#404040",marginTop:"10px",borderRadius:"20px",paddingLeft:"20px",paddingTop:"8px",paddingBottom:"8px",color:"#B3B3B3",outline:"none"},start:{fontFamily:"'Montserrat', sans-serif",fontSize:"1.1rem",borderRadius:"20px",textTransform:"none",marginTop:"20px",marginBottom:"20px"},label:{fontFamily:"'Ubuntu', sans-serif",color:"#B3B3B3",marginRight:"15px"}}}));var C=function(e){var t=k(),a=Object(n.useRef)(),o=Object(n.useRef)(),i=Object(n.useState)(!1),s=Object(c.a)(i,2),l=s[0],u=s[1],d=Object(n.useState)(""),x=Object(c.a)(d,2),E=x[0],y=x[1],h=r.a.useState(!1),B=Object(c.a)(h,2),C=B[0],j=B[1];function w(){j(!0)}return Object(n.useEffect)((function(){m.on("errorUserExists",(function(t){var n=t.clients,r=t.userName,i=t.socketList,s=!1;if(n.forEach((function(e){i[e].userName===r&&(s=!0)})),s)u(s),y("User name already exist");else{var l=a.current.value,c=o.current.value;sessionStorage.setItem("user",c),e.history.push("/room/".concat(l))}}))}),[e.history]),r.a.createElement("div",{className:t.body},r.a.createElement(N,{meeting:!1}),r.a.createElement(p.a,{container:!0,spacing:1},r.a.createElement("div",{className:t.paper,style:{marginLeft:"175px",backgroundColor:"#485461",backgroundImage:"linear-gradient(315deg, #485461 0%, #28313b 74%)"}},r.a.createElement(g.a,{variant:"body1",className:t.mainTitle,noWrap:!0},'VideoCall "Anyone" from "Anywhere"')),r.a.createElement(p.a,{item:!0,xs:6},r.a.createElement(f.a,{style:{marginLeft:"220px",backgroundColor:"#181818"},elevation:0},r.a.createElement("img",{src:v.a,alt:"source",style:{backgroundColor:"#181818",width:"450px"}}))),r.a.createElement(p.a,{item:!0,xs:6},r.a.createElement(f.a,{className:t.paper,style:{marginLeft:"100px",marginRight:"100px",backgroundColor:"#282828",paddingBottom:"10px"}},r.a.createElement("div",{style:{backgroundColor:"#404040",display:"inline-flex",marginTop:"30px",borderRadius:"30px",marginBottom:"20px"}},r.a.createElement(g.a,{variant:"body1",className:t.meetingStart,noWrap:!0},"Start VideoCall !!")),r.a.createElement("br",null),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"primary",variant:"contained",style:{marginRight:"15px"},onClick:w},"New Call"),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"secondary",variant:"contained",style:{marginLeft:"15px"},onClick:w},"Join Call"),C?r.a.createElement("div",null,r.a.createElement("span",{className:t.label}," Name : "),r.a.createElement("input",{className:t.inputBox,ref:o,style:{marginLeft:"12px"}}),r.a.createElement("br",null),r.a.createElement("span",{className:t.label}," RoomId : "),r.a.createElement("input",{className:t.inputBox,ref:a}),r.a.createElement("br",null),r.a.createElement(b.a,{size:"large",className:t.start,display:"inline",color:"primary",variant:"contained",style:{marginRight:"15px"},onClick:function(){var e=a.current.value,t=o.current.value;e&&t?m.emit("checkUser",{roomId:e,userName:t}):(u(!0),y("Enter Room Name or User Name"))}},"Les Go !!"),l?r.a.createElement("p",null,E):null):r.a.createElement("div",null)))))},j=a(40),w=a(33),O=a(19),S=a(57),R=a.n(S),T=function(e){var t=Object(n.useRef)(),a=e.peer,o=e.width;return Object(n.useEffect)((function(){a.on("stream",(function(e){t.current.srcObject=e})),a.on("track",(function(e,t){}))}),[a]),r.a.createElement("video",{playsInline:!0,autoPlay:!0,ref:t,style:{backgroundSize:"cover",overflow:"hidden",width:o}})},A=a(91),I=a.n(A),z=Object(d.a)((function(e){return{paper:{backgroundColor:"#282828",borderRadius:"50px",marginTop:"15px",paddingTop:"10px"},chatHeading:{backgroundColor:"#404040",padding:e.spacing(1),textAlign:"center",borderRadius:"30px",marginTop:"15px",paddingBottom:"5px"},chatBox:{fontFamily:"'Montserrat', sans-serif",fontSize:"1.4rem",color:"#B3B3B3",marginBottom:"10px",display:"inline-block"},icon:{color:"#B3B3B3",textAlign:"center",marginRight:"10px",verticalAlign:"middle"},messageBox:{backgroundColor:"#404040",padding:e.spacing(2),borderRadius:"30px",marginTop:"20px",height:"400px",overflowY:"auto"},inputBox:{backgroundColor:"#282828",color:"#B3B3B3",borderRadius:"20px",padding:"15px",width:"320px",outline:"none",borderBlockColor:"#181818",borderRightColor:"#181818",borderTopColor:"#181818",marginBottom:"15px"},sendBox:{marginTop:"30px",textAlign:"center"},message:{color:"#B3B3B3",backgroundColor:"#282828",display:"inline-block",marginBottom:"10px",padding:"10px",borderRadius:"20px"},title:{fontSize:"0.6rem",margin:0,fontFamily:"'Ubuntu', sans-serif"},body:{margin:"1px",fontSize:"1rem",fontFamily:"'Montserrat', sans-serif"},sent:{textAlign:"right"},received:{textAlign:"left"}}})),U=function(e){var t=e.roomId,a=sessionStorage.getItem("user"),o=Object(n.useState)([]),i=Object(c.a)(o,2),s=i[0],l=i[1],u=Object(n.useRef)(null),d=Object(n.useRef)(),p=z();return Object(n.useEffect)((function(){m.on("receiveMessage",(function(e){var t=e.msg,a=e.sender;l((function(e){return[].concat(Object(j.a)(e),[{sender:a,msg:t}])}))}))}),[]),r.a.createElement("div",null,r.a.createElement(f.a,{className:p.chatHeading},r.a.createElement(I.a,{fontSize:"large",className:p.icon}),r.a.createElement(g.a,{variant:"body1",className:p.chatBox},"Messages")),r.a.createElement("div",{className:p.messageBox},s&&s.map((function(e,t){var n=e.sender,o=e.msg;return n===a?r.a.createElement("div",{className:p.sent,key:t},r.a.createElement("div",{className:p.message},r.a.createElement("p",{className:p.title},n),r.a.createElement("p",{className:p.body},o))):r.a.createElement("div",{className:p.received},r.a.createElement("div",{className:p.message},r.a.createElement("p",{className:p.title},n),r.a.createElement("p",{className:p.body},o)))})),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:u})),r.a.createElement("div",{className:p.sendBox},r.a.createElement("input",{className:p.inputBox,ref:d,onKeyUp:function(e){if("Enter"===e.key){var n=e.target.value;n&&(m.emit("sendMessage",{roomID:t,msg:n,sender:a}),d.current.value="")}},placeholder:"Press Enter to send Message"})))},D=a(92),L=a.n(D),F=a(97),M=a.n(F),P=a(94),V=a.n(P),G=a(93),J=a.n(G),Q=a(95),Z=a.n(Q),_=a(96),W=a.n(_),q=new Date,K=q.toLocaleDateString("en-US",{day:"numeric",month:"short"}),Y=q.toLocaleDateString("en-US",{weekday:"long"}),H=Object(d.a)((function(e){return{root:{paddingBottom:"30px",marginBottom:"15px"},paper:{backgroundColor:"#282828",paddingLeft:"23px",borderRadius:"50px",marginTop:"15px",paddingTop:"10px"},button:{padding:"15px",borderRadius:"100%",backgroundColor:"#B3B3B3",color:"#282828",marginTop:"30px"},button1:{padding:"15px",borderRadius:"100%",marginTop:"30px"},date:{textAlign:"center",color:"#B3B3B3",fontFamily:"'Montserrat', sans-serif",fontSize:"1.4rem"}}}));var X=function(e){var t=H();return r.a.createElement("div",null,r.a.createElement(g.a,{variant:"h6",className:t.date},K,","),r.a.createElement(g.a,{variant:"h6",className:t.date},Y),r.a.createElement(f.a,{className:t.paper,style:{marginTop:"40px"}},r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button,onClick:e.toggleCameraAudio,"data-switch":"audio",title:"Toggle Audio"},e.userVideoAudio.audio?r.a.createElement(L.a,{fontSize:"large"}):r.a.createElement(J.a,{fontSize:"large"})),r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button,"data-switch":"video",onClick:e.toggleCameraAudio,title:"Toggle Video"},e.userVideoAudio.video?r.a.createElement(V.a,{fontSize:"large"}):r.a.createElement(Z.a,{fontSize:"large"})),e.leave?r.a.createElement(b.a,{size:"large",variant:"contained",color:"primary",className:t.button1,onClick:e.endCall,title:"Leave Room"},r.a.createElement(W.a,{fontSize:"large"})):r.a.createElement(b.a,{size:"large",variant:"contained",color:"secondary",className:t.button1,onClick:e.goToBack,title:"Leave Video"},r.a.createElement(M.a,{fontSize:"large"})))))},$=a(171),ee=Object($.a)({grandParent:{display:"flex",flexDirection:"row"},root:{backgroundColor:"#181818",padding:"15px"},parent:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",backgroundColor:"#181818",paddingTop:"150px"},child:{backgroundColor:"#282828",height:"350px",position:"relative",display:"flex",width:"430px",justifyContent:"center",marginRight:"20px",marginBottom:"20px"},writeName:{position:"absolute",color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"1.5rem",zIndex:"1",backgroundColor:"#282828",height:"180px",width:"380px",textAlign:"center",paddingTop:"150px"},parentbig:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",flexWrap:"wrap",backgroundColor:"#181818",paddingTop:"10px"},childbig:{backgroundColor:"#282828",height:"270px",position:"relative",display:"flex",width:"360px",justifyContent:"center",marginRight:"20px",marginBottom:"20px"},writeNamebig:{position:"absolute",color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"1.5rem",zIndex:"1",backgroundColor:"#282828",height:"150px",width:"350px",textAlign:"center",paddingTop:"120px"},meetingEnd:{backgroundColor:"#181818",padding:"50px",textAlign:"center"},meetingEndTitle:{color:"#B3B3B3",fontFamily:"'Ubuntu', sans-serif",fontSize:"2rem"}}),te=function(e){var t=ee(),a=Object(n.useState)([]),o=Object(c.a)(a,2),i=o[0],s=o[1],l=Object(n.useState)({localUser:{video:!0,audio:!0}}),u=Object(c.a)(l,2),d=u[0],g=u[1],f=Object(n.useState)(!0),b=Object(c.a)(f,2),x=b[0],v=b[1],E=Object(n.useState)(!1),y=Object(c.a)(E,2),h=y[0],B=y[1],k=Object(n.useRef)([]),C=Object(n.useRef)(),S=Object(n.useRef)(),A=e.match.params.roomId,I=sessionStorage.getItem("user");function z(e){return k.current.find((function(t){return t.peerID===e}))}function D(e,t,a,n,o){return r.a.createElement("div",{className:n,key:t},function(e,t,a){if(d.hasOwnProperty(e)&&!d[e].video)return r.a.createElement("div",{className:t,key:e},e)}(e.userName,o),r.a.createElement(T,{key:t,peer:e,width:a}))}Object(n.useEffect)((function(){return window.addEventListener("popstate",L),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){C.current.srcObject=e,S.current=e,m.emit("joinRoom",{roomId:A,userName:I}),m.on("userJoin",(function(t){var a=t.clients,n=t.socketList,r=[];a.forEach((function(t){var a=t,o=n[t].userName,i=n[t].video,s=n[t].audio;if(o!==I){var l=function(e,t,a){var n=new R.a({initiator:!0,trickle:!1,stream:a,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{username:"yq_BxvdCMrMv110BQ2bGPCD655MPBLy8UcPGPIS94u2JQdC3_xZqU_lfu1onKQ3gAAAAAGDR8wBjcnV5ZmZlc3Np",credential:"c92f9d3e-d365-11eb-8c7b-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]}});return n.on("signal",(function(a){m.emit("callUser",{userToCall:e,from:t,signal:a})})),n.on("disconnect",(function(){n.destroy()})),n}(a,m.id,e);l.userName=o,l.peerID=a,k.current.push({peerID:a,peer:l,userName:o}),r.push(l),g((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(w.a)({},l.userName,{video:i,audio:s}))}))}})),s(r)})),m.on("receiveCall",(function(t){var a=t.signal,n=t.from,r=t.info,o=r.userName,i=r.video,l=r.audio;if(!z(n)){var c=function(e,t,a){var n=new R.a({initiator:!1,trickle:!1,stream:a,config:{iceServers:[{urls:["stun:bn-turn1.xirsys.com"]},{url:"stun:stun01.sipphone.com"},{url:"stun:stun.ekiga.net"},{url:"stun:stun.fwdnet.net"},{url:"stun:stun.ideasip.com"},{url:"stun:stun.iptel.org"},{url:"stun:stun.rixtelecom.se"},{url:"stun:stun.schlund.de"},{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"},{url:"stun:stunserver.org"},{url:"stun:stun.softjoys.com"},{url:"stun:stun.voiparound.com"},{url:"stun:stun.voipbuster.com"},{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"stun:stun.xten.com"},{username:"yq_BxvdCMrMv110BQ2bGPCD655MPBLy8UcPGPIS94u2JQdC3_xZqU_lfu1onKQ3gAAAAAGDR8wBjcnV5ZmZlc3Np",credential:"c92f9d3e-d365-11eb-8c7b-0242ac140004",urls:["turn:bn-turn1.xirsys.com:80?transport=udp","turn:bn-turn1.xirsys.com:3478?transport=udp","turn:bn-turn1.xirsys.com:80?transport=tcp","turn:bn-turn1.xirsys.com:3478?transport=tcp","turns:bn-turn1.xirsys.com:443?transport=tcp","turns:bn-turn1.xirsys.com:5349?transport=tcp"]}]}});return n.on("signal",(function(e){m.emit("acceptCall",{signal:e,to:t})})),n.on("disconnect",(function(){n.destroy()})),n.signal(e),n}(a,n,e);c.userName=o,k.current.push({peerID:n,peer:c,userName:o}),s((function(e){return[].concat(Object(j.a)(e),[c])})),g((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(w.a)({},c.userName,{video:i,audio:l}))}))}})),m.on("callAccepted",(function(e){var t=e.signal;z(e.answerId).peer.signal(t)})),m.on("userLeave",(function(e){var t=z(e.userId);t.peer.destroy(),s((function(e){return e=e.filter((function(e){return e.peerID!==t.peer.peerID})),Object(j.a)(e)}))}))})),m.on("toggleVideo",(function(e){var t=e.userId,a=e.switchTarget,n=z(t);g((function(e){var t=e[n.userName].video,r=e[n.userName].audio;return"video"===a?t=!t:r=!r,Object(O.a)(Object(O.a)({},e),{},Object(w.a)({},n.userName,{video:t,audio:r}))}))})),function(){m.disconnect()}}),[]);var L=function(e){e.preventDefault(),m.emit("finish",{roomId:A}),sessionStorage.removeItem("user"),window.location.href="/"};return r.a.createElement("div",{className:t.root},r.a.createElement(N,{meeting:!0,room:A}),r.a.createElement("div",null,r.a.createElement(p.a,{container:!0,spacing:2},r.a.createElement(p.a,{item:!0,xs:6,sm:1},r.a.createElement(X,{goToBack:function(e){e.preventDefault(),v(!1),B(!0),m.emit("leaveRoom",{roomId:A})},toggleCameraAudio:function(e){var t=e.currentTarget.getAttribute("data-switch");console.log(e.currentTarget.getAttribute("data-switch")),g((function(e){var a=e.localUser.video,n=e.localUser.audio;if("video"===t){a=!a,C.current.srcObject.getVideoTracks()[0].enabled=a}else{var r=C.current.srcObject.getAudioTracks()[0];n=!n,r?r.enabled=n:S.current.getAudioTracks()[0].enabled=n}return Object(O.a)(Object(O.a)({},e),{},{localUser:{video:a,audio:n}})})),m.emit("toggle",{roomId:A,switchTarget:t})},userVideoAudio:d.localUser,endCall:L,leave:h})),r.a.createElement(p.a,{item:!0,xs:6,sm:8},r.a.createElement("div",{className:t.grandParent},!i||i.length<2?r.a.createElement("div",{className:t.parent},x?r.a.createElement("div",{className:t.child},d.localUser.video?null:r.a.createElement("div",{className:t.writeName},I),r.a.createElement("video",{style:{backgroundSize:"cover",overflow:"hidden",width:"380px"},ref:C,autoPlay:!0,muted:!0})):r.a.createElement("div",{className:t.meetingEnd},r.a.createElement("p",{className:t.meetingEndTitle},"Video Chat Ended !!"),r.a.createElement("p",{className:t.meetingEndTitle},"You Can Still Chat with Others !!")),x&&i&&i.map((function(e,a){return D(e,a,"380px",t.child,t.writeName)}))):r.a.createElement("div",{className:t.parentbig},x?r.a.createElement("div",{className:t.childbig},d.localUser.video?null:r.a.createElement("div",{className:t.writeNamebig},I),r.a.createElement("video",{style:{backgroundSize:"cover",overflow:"hidden",width:"340px"},ref:C,autoPlay:!0,muted:!0})):null,x&&i&&i.map((function(e,a){return D(e,a,"340px",t.childbig,t.writeNamebig)}))))),r.a.createElement(p.a,{item:!0,xs:6,sm:3},r.a.createElement(U,{roomId:A})))))};var ae=function(){return r.a.createElement(s.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:C}),r.a.createElement(l.a,{exact:!0,path:"/room/:roomId",component:te})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root"))},87:function(e,t,a){e.exports=a.p+"static/media/image1.f142bb56.svg"}},[[101,1,2]]]);
//# sourceMappingURL=main.711ae7b3.chunk.js.map